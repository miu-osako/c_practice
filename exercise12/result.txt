$ make
gcc -Wall -Wextra -O2   -c -o practice12.o practice12.c
gcc -Wall -Wextra -O2 -o hexdump practice12.o

$ ./hexdump practice12.c
ADDRESS  00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F
00000000 23 69 6E 63 6C 75 64 65 20 3C 73 74 64 69 6F 2E
00000010 68 3E 0A 23 69 6E 63 6C 75 64 65 20 3C 73 74 64
00000020 6C 69 62 2E 68 3E 0A 23 69 6E 63 6C 75 64 65 20
00000030 3C 73 74 72 69 6E 67 2E 68 3E 0A 23 69 6E 63 6C
00000040 75 64 65 20 3C 65 72 72 6E 6F 2E 68 3E 0A 0A 23
00000050 64 65 66 69 6E 65 20 4D 41 58 5F 42 59 54 45 20
00000060 31 36 20 2F 2A 20 31 E8 A1 8C E3 81 82 E3 81 9F
00000070 E3 82 8A E3 81 AE E3 83 90 E3 82 A4 E3 83 88 20
00000080 2A 2F 0A 23 64 65 66 69 6E 65 20 53 55 43 43 45
00000090 53 53 20 30 20 2F 2A 20 E6 AD A3 E5 B8 B8 E7 B5
000000A0 82 E4 BA 86 20 2A 2F 0A 23 64 65 66 69 6E 65 20
000000B0 46 41 49 4C 55 52 45 20 31 20 2F 2A 20 E7 95 B0
000000C0 E5 B8 B8 E7 B5 82 E4 BA 86 20 2A 2F 0A 0A 69 6E
000000D0 74 20 6D 61 69 6E 28 69 6E 74 20 61 72 67 63 2C
000000E0 20 63 68 61 72 2A 20 61 72 67 76 5B 5D 29 0A 7B
000000F0 0A 09 75 6E 73 69 67 6E 65 64 20 63 68 61 72 20
00000100 69 6E 70 75 74 5F 62 79 74 65 5B 4D 41 58 5F 42
00000110 59 54 45 5D 3B 0A 09 2F 2A 20 E5 85 A5 E5 8A 9B
00000120 E6 96 87 E5 AD 97 31 E6 96 87 E5 AD 97 E3 81 AB
00000130 E3 81 A4 E3 81 8D E3 80 81 48 45 58 E8 A1 A8 E8
00000140 A8 98 E3 81 AE E4 B8 8B 32 E6 A1 81 28 30 78 58
00000150 58 E3 81 AE 58 58 29 E3 82 92 E4 BD BF E7 94 A8
00000160 E3 81 99 E3 82 8B E3 81 9F E3 82 81 32 20 E3 83
00000170 90 E3 82 A4 E3 83 88 E3 80 81 0A 20 09 E5 8D 8A
00000180 E8 A7 92 E3 82 B9 E3 83 9A E3 83 BC E3 82 B9 E3
00000190 81 AE 31 E3 83 90 E3 82 A4 E3 83 88 E3 81 AE E5
000001A0 90 88 E8 A8 88 33 E3 83 90 E3 82 A4 E3 83 88 E3
000001B0 82 92 E4 BD BF E3 81 86 E3 80 82 E6 9C 80 E5 BE
000001C0 8C E3 81 AB 4E 55 4C 4C E6 96 87 E5 AD 97 E3 81
000001D0 8C E5 85 A5 E3 82 8B E3 81 9F E3 82 81 E3 80 81
000001E0 2B 31 E3 81 97 E3 81 A6 E3 81 84 E3 82 8B E3 80
000001F0 82 20 2A 2F 0A 09 63 68 61 72 20 6F 75 74 5B 4D
00000200 41 58 5F 42 59 54 45 20 2A 20 33 20 2B 20 31 5D
00000210 3B 0A 09 73 69 7A 65 5F 74 20 69 2C 20 72 65 61
00000220 64 5F 73 69 7A 65 3B 0A 09 63 6F 6E 73 74 20 63
00000230 68 61 72 20 2A 69 6E 66 69 6C 65 3B 0A 09 46 49
00000240 4C 45 20 2A 66 70 3B 0A 09 75 6E 73 69 67 6E 65
00000250 64 20 69 6E 74 20 69 6E 64 65 78 20 3D 20 30 3B
00000260 0A 09 69 6E 74 20 66 69 6C 65 5F 63 6C 6F 73 65
00000270 5F 73 74 61 74 75 73 3B 0A 09 69 6E 74 20 72 63
00000280 20 3D 20 53 55 43 43 45 53 53 3B 0A 0A 09 69 66
00000290 20 28 61 72 67 63 20 21 3D 20 32 29 20 7B 0A 09
000002A0 09 66 70 72 69 6E 74 66 28 73 74 64 65 72 72 2C
000002B0 20 22 75 73 61 67 65 3A 20 68 65 78 64 75 6D 70
000002C0 20 66 69 6C 65 6E 61 6D 65 5C 6E 22 0A 09 09 09
000002D0 22 6F 70 74 69 6F 6E 73 3A 20 66 69 6C 65 6E 61
000002E0 6D 65 20 E3 83 95 E3 82 A1 E3 82 A4 E3 83 AB E5
000002F0 90 8D 5C 6E 22 29 3B 0A 09 09 72 65 74 75 72 6E
00000300 20 46 41 49 4C 55 52 45 3B 0A 09 7D 0A 0A 09 69
00000310 6E 66 69 6C 65 20 3D 20 61 72 67 76 5B 31 5D 3B
00000320 0A 09 66 70 20 3D 20 66 6F 70 65 6E 28 69 6E 66
00000330 69 6C 65 2C 20 22 72 62 22 29 3B 0A 09 69 66 20
00000340 28 66 70 20 3D 3D 20 4E 55 4C 4C 29 20 7B 0A 09
00000350 09 66 70 72 69 6E 74 66 28 73 74 64 65 72 72 2C
00000360 20 22 65 72 72 6F 72 20 6F 70 65 6E 69 6E 67 20
00000370 27 25 73 27 3A 20 25 73 5C 6E 22 2C 20 69 6E 66
00000380 69 6C 65 2C 20 73 74 72 65 72 72 6F 72 28 65 72
00000390 72 6E 6F 29 29 3B 0A 09 09 72 65 74 75 72 6E 20
000003A0 46 41 49 4C 55 52 45 3B 0A 09 7D 0A 0A 09 70 72
000003B0 69 6E 74 66 28 22 41 44 44 52 45 53 53 20 20 30
000003C0 30 20 30 31 20 30 32 20 30 33 20 30 34 20 30 35
000003D0 20 30 36 20 30 37 20 30 38 20 30 39 20 30 41 20
000003E0 30 42 20 30 43 20 30 44 20 30 45 20 30 46 5C 6E
000003F0 22 29 3B 0A 09 77 68 69 6C 65 20 28 21 66 65 6F
00000400 66 28 66 70 29 29 20 7B 0A 09 09 72 65 61 64 5F
00000410 73 69 7A 65 20 3D 20 66 72 65 61 64 28 69 6E 70
00000420 75 74 5F 62 79 74 65 2C 20 73 69 7A 65 6F 66 28
00000430 75 6E 73 69 67 6E 65 64 20 63 68 61 72 29 2C 20
00000440 4D 41 58 5F 42 59 54 45 2C 20 66 70 29 3B 0A 09
00000450 09 69 66 20 28 66 65 72 72 6F 72 28 66 70 29 29
00000460 20 7B 0A 09 09 09 70 65 72 72 6F 72 28 22 66 72
00000470 65 61 64 20 65 72 72 6F 72 5C 6E 22 29 3B 0A 09
00000480 09 09 72 63 20 3D 20 46 41 49 4C 55 52 45 3B 0A
00000490 09 09 09 62 72 65 61 6B 3B 0A 09 09 7D 0A 09 09
000004A0 66 6F 72 20 28 69 20 3D 20 30 3B 20 69 20 3C 20
000004B0 72 65 61 64 5F 73 69 7A 65 3B 20 69 2B 2B 29 20
000004C0 7B 0A 09 09 2F 2A 20 E5 85 A5 E5 8A 9B E6 96 87
000004D0 E5 AD 97 31 E6 96 87 E5 AD 97 E3 81 AB E3 81 A4
000004E0 E3 81 8D E3 80 81 48 45 58 E8 A1 A8 E8 A8 98 E3
000004F0 81 AE E4 B8 8B 32 E6 A1 81 28 30 78 58 58 E3 81
00000500 AE 58 58 29 E3 82 92 E4 BD BF E7 94 A8 E3 81 99
00000510 E3 82 8B E3 81 9F E3 82 81 32 E3 83 90 E3 82 A4
00000520 E3 83 88 E3 80 81 0A 09 09 E5 8D 8A E8 A7 92 E3
00000530 82 B9 E3 83 9A E3 83 BC E3 82 B9 E3 81 AE 31 E3
00000540 83 90 E3 82 A4 E3 83 88 E3 81 AE E5 90 88 E8 A8
00000550 88 33 E3 83 90 E3 82 A4 E3 83 88 E3 82 92 E4 BD
00000560 BF E3 81 86 E3 80 82 0A 09 09 E3 81 9D E3 81 AE
00000570 E3 81 9F E3 82 81 E5 85 A5 E5 8A 9B E6 96 87 E5
00000580 AD 97 E3 81 AE 31 E6 96 87 E5 AD 97 E7 9B AE E3
00000590 81 AF 6F 75 74 5B 30 5D E3 81 8B E3 82 89 E5 A7
000005A0 8B E3 81 BE E3 82 8A 32 E6 96 87 E5 AD 97 E7 9B
000005B0 AE E4 BB A5 E9 99 8D E3 81 AE E6 B7 BB E3 81 88
000005C0 E5 AD 97 E3 81 AF 33 E3 81 AE E5 80 8D E6 95 B0
000005D0 E3 81 A8 E3 81 AA E3 82 8B E3 80 82 20 2A 2F 0A
000005E0 09 09 09 73 70 72 69 6E 74 66 28 6F 75 74 20 2B
000005F0 20 69 20 2A 20 33 2C 20 22 20 25 30 32 58 22 2C
00000600 20 69 6E 70 75 74 5F 62 79 74 65 5B 69 5D 29 3B
00000610 0A 09 09 7D 0A 09 09 70 72 69 6E 74 66 28 22 25
00000620 30 37 58 30 25 73 5C 6E 22 2C 20 69 6E 64 65 78
00000630 2C 20 6F 75 74 29 3B 0A 09 09 69 6E 64 65 78 2B
00000640 2B 3B 0A 09 7D 0A 0A 09 66 69 6C 65 5F 63 6C 6F
00000650 73 65 5F 73 74 61 74 75 73 20 3D 20 66 63 6C 6F
00000660 73 65 28 66 70 29 3B 0A 09 69 66 20 28 66 69 6C
00000670 65 5F 63 6C 6F 73 65 5F 73 74 61 74 75 73 20 21
00000680 3D 20 30 29 20 7B 0A 09 09 70 65 72 72 6F 72 28
00000690 22 65 72 72 6F 72 20 63 6C 6F 73 69 6E 67 20 66
000006A0 69 6C 65 5C 6E 22 29 3B 0A 09 09 72 65 74 75 72
000006B0 6E 20 46 41 49 4C 55 52 45 3B 0A 09 7D 0A 0A 09
000006C0 72 65 74 75 72 6E 20 72 63 3B 0A 7D 0A

$ xxd practice12.c
00000000: 2369 6e63 6c75 6465 203c 7374 6469 6f2e  #include <stdio.
00000010: 683e 0a23 696e 636c 7564 6520 3c73 7464  h>.#include <std
00000020: 6c69 622e 683e 0a23 696e 636c 7564 6520  lib.h>.#include
00000030: 3c73 7472 696e 672e 683e 0a23 696e 636c  <string.h>.#incl
00000040: 7564 6520 3c65 7272 6e6f 2e68 3e0a 0a23  ude <errno.h>..#
00000050: 6465 6669 6e65 204d 4158 5f42 5954 4520  define MAX_BYTE
00000060: 3136 202f 2a20 31e8 a18c e381 82e3 819f  16 /* 1.........
00000070: e382 8ae3 81ae e383 90e3 82a4 e383 8820  ...............
00000080: 2a2f 0a23 6465 6669 6e65 2053 5543 4345  */.#define SUCCE
00000090: 5353 2030 202f 2a20 e6ad a3e5 b8b8 e7b5  SS 0 /* ........
000000a0: 82e4 ba86 202a 2f0a 2364 6566 696e 6520  .... */.#define
000000b0: 4641 494c 5552 4520 3120 2f2a 20e7 95b0  FAILURE 1 /* ...
000000c0: e5b8 b8e7 b582 e4ba 8620 2a2f 0a0a 696e  ......... */..in
000000d0: 7420 6d61 696e 2869 6e74 2061 7267 632c  t main(int argc,
000000e0: 2063 6861 722a 2061 7267 765b 5d29 0a7b   char* argv[]).{
000000f0: 0a09 756e 7369 676e 6564 2063 6861 7220  ..unsigned char
00000100: 696e 7075 745f 6279 7465 5b4d 4158 5f42  input_byte[MAX_B
00000110: 5954 455d 3b0a 092f 2a20 e585 a5e5 8a9b  YTE];../* ......
00000120: e696 87e5 ad97 31e6 9687 e5ad 97e3 81ab  ......1.........
00000130: e381 a4e3 818d e380 8148 4558 e8a1 a8e8  .........HEX....
00000140: a898 e381 aee4 b88b 32e6 a181 2830 7858  ........2...(0xX
00000150: 58e3 81ae 5858 29e3 8292 e4bd bfe7 94a8  X...XX).........
00000160: e381 99e3 828b e381 9fe3 8281 3220 e383  ............2 ..
00000170: 90e3 82a4 e383 88e3 8081 0a20 09e5 8d8a  ........... ....
00000180: e8a7 92e3 82b9 e383 9ae3 83bc e382 b9e3  ................
00000190: 81ae 31e3 8390 e382 a4e3 8388 e381 aee5  ..1.............
000001a0: 9088 e8a8 8833 e383 90e3 82a4 e383 88e3  .....3..........
000001b0: 8292 e4bd bfe3 8186 e380 82e6 9c80 e5be  ................
000001c0: 8ce3 81ab 4e55 4c4c e696 87e5 ad97 e381  ....NULL........
000001d0: 8ce5 85a5 e382 8be3 819f e382 81e3 8081  ................
000001e0: 2b31 e381 97e3 81a6 e381 84e3 828b e380  +1..............
000001f0: 8220 2a2f 0a09 6368 6172 206f 7574 5b4d  . */..char out[M
00000200: 4158 5f42 5954 4520 2a20 3320 2b20 315d  AX_BYTE * 3 + 1]
00000210: 3b0a 0973 697a 655f 7420 692c 2072 6561  ;..size_t i, rea
00000220: 645f 7369 7a65 3b0a 0963 6f6e 7374 2063  d_size;..const c
00000230: 6861 7220 2a69 6e66 696c 653b 0a09 4649  har *infile;..FI
00000240: 4c45 202a 6670 3b0a 0975 6e73 6967 6e65  LE *fp;..unsigne
00000250: 6420 696e 7420 696e 6465 7820 3d20 303b  d int index = 0;
00000260: 0a09 696e 7420 6669 6c65 5f63 6c6f 7365  ..int file_close
00000270: 5f73 7461 7475 733b 0a09 696e 7420 7263  _status;..int rc
00000280: 203d 2053 5543 4345 5353 3b0a 0a09 6966   = SUCCESS;...if
00000290: 2028 6172 6763 2021 3d20 3229 207b 0a09   (argc != 2) {..
000002a0: 0966 7072 696e 7466 2873 7464 6572 722c  .fprintf(stderr,
000002b0: 2022 7573 6167 653a 2068 6578 6475 6d70   "usage: hexdump
000002c0: 2066 696c 656e 616d 655c 6e22 0a09 0909   filename\n"....
000002d0: 226f 7074 696f 6e73 3a20 6669 6c65 6e61  "options: filena
000002e0: 6d65 20e3 8395 e382 a1e3 82a4 e383 abe5  me .............
000002f0: 908d 5c6e 2229 3b0a 0909 7265 7475 726e  ..\n");...return
00000300: 2046 4149 4c55 5245 3b0a 097d 0a0a 0969   FAILURE;..}...i
00000310: 6e66 696c 6520 3d20 6172 6776 5b31 5d3b  nfile = argv[1];
00000320: 0a09 6670 203d 2066 6f70 656e 2869 6e66  ..fp = fopen(inf
00000330: 696c 652c 2022 7262 2229 3b0a 0969 6620  ile, "rb");..if
00000340: 2866 7020 3d3d 204e 554c 4c29 207b 0a09  (fp == NULL) {..
00000350: 0966 7072 696e 7466 2873 7464 6572 722c  .fprintf(stderr,
00000360: 2022 6572 726f 7220 6f70 656e 696e 6720   "error opening
00000370: 2725 7327 3a20 2573 5c6e 222c 2069 6e66  '%s': %s\n", inf
00000380: 696c 652c 2073 7472 6572 726f 7228 6572  ile, strerror(er
00000390: 726e 6f29 293b 0a09 0972 6574 7572 6e20  rno));...return
000003a0: 4641 494c 5552 453b 0a09 7d0a 0a09 7072  FAILURE;..}...pr
000003b0: 696e 7466 2822 4144 4452 4553 5320 2030  intf("ADDRESS  0
000003c0: 3020 3031 2030 3220 3033 2030 3420 3035  0 01 02 03 04 05
000003d0: 2030 3620 3037 2030 3820 3039 2030 4120   06 07 08 09 0A
000003e0: 3042 2030 4320 3044 2030 4520 3046 5c6e  0B 0C 0D 0E 0F\n
000003f0: 2229 3b0a 0977 6869 6c65 2028 2166 656f  ");..while (!feo
00000400: 6628 6670 2929 207b 0a09 0972 6561 645f  f(fp)) {...read_
00000410: 7369 7a65 203d 2066 7265 6164 2869 6e70  size = fread(inp
00000420: 7574 5f62 7974 652c 2073 697a 656f 6628  ut_byte, sizeof(
00000430: 756e 7369 676e 6564 2063 6861 7229 2c20  unsigned char),
00000440: 4d41 585f 4259 5445 2c20 6670 293b 0a09  MAX_BYTE, fp);..
00000450: 0969 6620 2866 6572 726f 7228 6670 2929  .if (ferror(fp))
00000460: 207b 0a09 0909 7065 7272 6f72 2822 6672   {....perror("fr
00000470: 6561 6420 6572 726f 725c 6e22 293b 0a09  ead error\n");..
00000480: 0909 7263 203d 2046 4149 4c55 5245 3b0a  ..rc = FAILURE;.
00000490: 0909 0962 7265 616b 3b0a 0909 7d0a 0909  ...break;...}...
000004a0: 666f 7220 2869 203d 2030 3b20 6920 3c20  for (i = 0; i <
000004b0: 7265 6164 5f73 697a 653b 2069 2b2b 2920  read_size; i++)
000004c0: 7b0a 0909 2f2a 20e5 85a5 e58a 9be6 9687  {.../* .........
000004d0: e5ad 9731 e696 87e5 ad97 e381 abe3 81a4  ...1............
000004e0: e381 8de3 8081 4845 58e8 a1a8 e8a8 98e3  ......HEX.......
000004f0: 81ae e4b8 8b32 e6a1 8128 3078 5858 e381  .....2...(0xXX..
00000500: ae58 5829 e382 92e4 bdbf e794 a8e3 8199  .XX)............
00000510: e382 8be3 819f e382 8132 e383 90e3 82a4  .........2......
00000520: e383 88e3 8081 0a09 09e5 8d8a e8a7 92e3  ................
00000530: 82b9 e383 9ae3 83bc e382 b9e3 81ae 31e3  ..............1.
00000540: 8390 e382 a4e3 8388 e381 aee5 9088 e8a8  ................
00000550: 8833 e383 90e3 82a4 e383 88e3 8292 e4bd  .3..............
00000560: bfe3 8186 e380 820a 0909 e381 9de3 81ae  ................
00000570: e381 9fe3 8281 e585 a5e5 8a9b e696 87e5  ................
00000580: ad97 e381 ae31 e696 87e5 ad97 e79b aee3  .....1..........
00000590: 81af 6f75 745b 305d e381 8be3 8289 e5a7  ..out[0]........
000005a0: 8be3 81be e382 8a32 e696 87e5 ad97 e79b  .......2........
000005b0: aee4 bba5 e999 8de3 81ae e6b7 bbe3 8188  ................
000005c0: e5ad 97e3 81af 33e3 81ae e580 8de6 95b0  ......3.........
000005d0: e381 a8e3 81aa e382 8be3 8082 202a 2f0a  ............ */.
000005e0: 0909 0973 7072 696e 7466 286f 7574 202b  ...sprintf(out +
000005f0: 2069 202a 2033 2c20 2220 2530 3258 222c   i * 3, " %02X",
00000600: 2069 6e70 7574 5f62 7974 655b 695d 293b   input_byte[i]);
00000610: 0a09 097d 0a09 0970 7269 6e74 6628 2225  ...}...printf("%
00000620: 3037 5830 2573 5c6e 222c 2069 6e64 6578  07X0%s\n", index
00000630: 2c20 6f75 7429 3b0a 0909 696e 6465 782b  , out);...index+
00000640: 2b3b 0a09 7d0a 0a09 6669 6c65 5f63 6c6f  +;..}...file_clo
00000650: 7365 5f73 7461 7475 7320 3d20 6663 6c6f  se_status = fclo
00000660: 7365 2866 7029 3b0a 0969 6620 2866 696c  se(fp);..if (fil
00000670: 655f 636c 6f73 655f 7374 6174 7573 2021  e_close_status !
00000680: 3d20 3029 207b 0a09 0970 6572 726f 7228  = 0) {...perror(
00000690: 2265 7272 6f72 2063 6c6f 7369 6e67 2066  "error closing f
000006a0: 696c 655c 6e22 293b 0a09 0972 6574 7572  ile\n");...retur
000006b0: 6e20 4641 494c 5552 453b 0a09 7d0a 0a09  n FAILURE;..}...
000006c0: 7265 7475 726e 2072 633b 0a7d 0a         return rc;.}.

$ ./hexdump
usage: hexdump filename
options: filename ファイル名
